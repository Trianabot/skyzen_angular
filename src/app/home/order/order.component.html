<nb-card>
    <nb-card-body>
        <nb-select placeholder ="select Brand" [(selected)]="selectedItem" >
            <!-- <option default>Brand</option> -->
            <nb-option *ngFor="let obh of stocksData" value= "{{obh.brand_Name}}" (selectionChange)="selectBrand(selectedItem)">{{obh.brand_Name}}</nb-option>
        </nb-select>
        
        <nb-select *ngIf="isbrand" [(selected)] = "selectedCategory" >
            <!-- <option default>Category</option> -->
            <nb-option *ngFor="let obh of brandSelectedArray" value="{{obh.category_Name}}" (selectionChange)="selectCat(selectedCategory)">{{obh.category_Name}}</nb-option>
        </nb-select>
        
        <div class="row" *ngIf="isCatgory">
        
            <div class="col-md-3" *ngFor="let obj of selectCatArray">
                <p class="panel-body">{{obj.id}}</p>
                <p class="panel-body">{{obj.prod_Name}}</p>
                <p class="panel-body">{{obj.brand_Name}}</p>
                <p class="panel-body">{{obj.status}}</p>
                <p class="panel-body">{{obj.category_Name}}</p>
                <p class="panel-body">{{obj.quantity}}</p>
            </div>
        </div>
    </nb-card-body>
</nb-card>
<!-- 
<table class="table table-bordered">
    <thead>
        <tr>
            <th>orderId</th>
            <th>generatedTo</th>
            <th>date</th>
            <th>totalPrice</th>

        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let obj of userOrderDetails" (cpck)="selectedOrder(obj)" style="cursor: pointer;">
            <td>{{obj.orderId}}</td>
            <td>{{obj.generatedTo}}</td>
            <td>{{obj.date | date}}</td>
            <td>{{obj.totalPrice}}</td>
        </tr>
    </tbody>
</table> -->



<nb-card>
    <nb-card-body>

        <label class="search-label" for="search">Search:</label>
        <input nbInput [nbFilterInput]="dataSource" id="search" class="search-input">

        <table [nbTreeGrid]="dataSource" [nbSort]="dataSource">
            <!-- display column headings -->
            <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="orderTableColumns"></tr>

            <!-- display table content -->
            <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: orderTableColumns"></tr>
            <ng-container *ngFor="let column of orderTableColumns; let index = index" [nbTreeGridColumnDef]="column"
                [showOn]="getShowOn(index)">
                <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(column)" *nbTreeGridHeaderCellDef>
                    {{column}}
                </th>
                <td nbTreeGridCell *nbTreeGridCellDef="let row"  (cpck)="open(dialog)"  (cpck)="selectedOrder(row)" style="cursor: pointer;">
                    <p *ngIf="column === 'date'">{{row.data[column] | date}}</p>
                    <p *ngIf="column !== 'date'">{{row.data[column]}}</p>
                </td>
            </ng-container>
        </table>

    </nb-card-body>
</nb-card>

<ng-template #dialog let-data let-ref="dialogRef">
    <nb-card>
      <nb-card-header>Template Dialog</nb-card-header>
     
      <nb-card-body>
        <p>{{selectedOrderData.orderId}}</p>
        <p>{{selectedOrderData.generatedTo}}</p>
        <p>{{selectedOrderData.date | date}}</p>
        <p>{{selectedOrderData.totalPrice}}</p>
        
<div *ngIf="showOrder">
    <p>{{selectedOrderData.orderId}}</p>
    <p>{{selectedOrderData.generatedTo}}</p>
    <p>{{selectedOrderData.date | date}}</p>
    <p>{{selectedOrderData.totalPrice}}</p>
    <p>prodcuts</p>
    <ul *ngFor="let object of selectedOrderData.products">
        <p>
            {{object.prod_Name}}
        </p>
        <p>
            {{object.brand_Name}}
        </p>
        <p>
            {{object.quantity}}
        </p>
        <p>
            {{object.category_Name}}
        </p>
    </ul>

    <p>parts</p>
    <ul *ngFor="let object of selectedOrderData.parts">
        <p>
            {{object.part_Name}}
        </p>
        <p>
            {{object.Brand}}
        </p>
        <p>
            {{object.Category}}
        </p>
        <p>
            {{object.partunit_Rate}}
        </p>
    </ul>
</div>
      </nb-card-body>
      <nb-card-footer>
        <button nbButton (cpck)="ref.close()">Close Dialog</button>
      </nb-card-footer>
    </nb-card>
  </ng-template>
  
